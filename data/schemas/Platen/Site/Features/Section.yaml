# yaml-language-server: $schema=https://json-schema.org/draft/2020-12/schema
$schema: https://json-schema.org/draft/2020-12/schema
$id: /schemas/Platen/Site/Features/Section.schema.yaml
title: Section
description: Settings that control the site's section rendering feature.
schematize:
  details: |
    These settings control Platen's section rendering feature. When this feature is enabled, you can
    use the `section` [codeblock rendering hook][01] to add a description list linking to a
    section's pages where each term is a link to a page and the definition is that page's summary.

    <!-- Reference Links -->
    [01]: /modules/platen/renderers/section
type: object
properties:
  Enabled:
    title: Enable Section
    description: Choose whether section block rendering is available for the site.
    schematize:
      details: |
        Choose whether the site renders codeblocks as as lists of pages with their summaries. The
        default is `true`.
      weight: 1
    type: boolean
    default: true
  Aliases:
    title: Aliases
    description: Defines additional language IDs for the codeblock render hook.
    schematize:
      weight: 4
      details: |
        Define one or more language IDs to use in addition to the default language IDs for codeblocks
        that render section blocks. The default language ID is `section`.

        You can specify a string or an array of strings. If the value is an array, each item in the
        array is added as an alias.
    oneOf:
      - type: array
        items:
          type: string
      - type: string
  Partials:
    title: Feature Partials
    description: Define a map of partials for Platen to inject as needed.
    schematize:
      details: |
        Define a map of partials for Platen to inject as needed. These partials are only
        injected when [sref:`Enabled`] is set to `true`.

        <!-- Reference Links -->
        [sref:`Enabled`]: Platen.Site.Features.Section.Enabled
      weight: 100
      skipSchemaRender: true
    type: object
    properties:
      Renderers:
        title: Renderer Partials
        description: Registers one or more partials that act as render hooks.
        type: object
        schematize:
          skipSchemaRender: true
          details: |
            Defines a map of partials to use as Markdown render hooks. Like all partials, these are
            only processed when [sref:`Enabled`] is set to `true`.

            Supported renderer partials include:

            - `Codeblock`, processed for fenced code blocks with a language ID
            - `Heading`, processed for headings
            - `Image`, processed for image links
            - `Link`, processed for non-image links

            In all cases, all renderer partials for enabled features are checked one after the other
            unless they return a render string. Only the first applicable partial that returns a
            render string is processed and rendered.

            <!-- Reference Links -->
            [sref:`Enabled`]: Platen.Site.Features.Section.Enabled
        properties:
          Codeblock:
            title: Codeblock Render Hook Partial
            description: Adds a partial to call when processing the codeblock render hook.
            schematize:
              details: |
                Adds support for rendering the linked list of a section's pages with their
                summaries. This render hook is only processed when the language ID for a codeblock
                is `section`.

                It renders the current page's children inside a [sref:<`dl`>][s01] element with a
                [sref:`<dt>`][s02] linking to each page and a [sref:`<dd`][s03] containing the
                page's summary. The description list is added inside a containing [sref:<div>][s04]
                with optional leading text.

                For more information about using the codeblock, see
                [the reference documentation][01].

                This value defaults to `platen/features/section/codeblock`. You can replace it with a
                different value, defining a new partial, or override the existing partial by creating
                the file `layouts/partials/platen/features/mermaid/codeblock.html` in your own site or
                module.

                For more information about defining codeblock render hook partials, see
                [Defining a Codeblock Render Hook Partial][02] in the [Theme Guide][03].

                <!-- Reference Links -->
                [01]: /modules/platen/renderers/section
                [02]: /styling
                [03]: /styling
                [s01]: mdn.html.element:dl
                [s02]: mdn.html.element:dt
                [s03]: mdn.html.element:dd
                [s04]: mdn.html.element:div
            type: string
            default: platen/features/section/codeblock
