# yaml-language-server: $schema=https://json-schema.org/draft/2020-12/schema
$schema: https://json-schema.org/draft/2020-12/schema
$id: /schemas/Platen/Site/Features/Details.schema.yaml
title: Details
description: Settings that control the site's details rendering feature.
schematize:
  details: |
    These settings control Platen's details rendering feature. When this feature is enabled, you can
    use the `details` [codeblock rendering hook][01] to add semantically collapsible content to a
    page.

    <!-- Reference Links -->
    [01]: /modules/platen/renderers/details
type: object
properties:
  Enabled:
    title: Enable Details
    description: Choose whether details block rendering is available for the site.
    schematize:
      details: |
        Choose whether the site renders codeblocks as [sref:`<details`] elements, making the content
        semantically collapsible. The default is `true`.

        [sref:`<details>`]: mdn.html.element:details
      weight: 1
    type: boolean
    default: true
  Aliases:
    title: Aliases
    description: Defines additional language IDs for the codeblock render hook.
    schematize:
      weight: 4
      details: |
        Define one or more language IDs to use in addition to the default language IDs for codeblocks
        that render details blocks. The default language ID is `details`.

        You can specify a string or an array of strings. If the value is an array, each item in the
        array is added as an alias.
    oneOf:
      - type: array
        items:
          type: string
      - type: string
  Partials:
    title: Feature Partials
    description: Define a map of partials for Platen to inject as needed.
    schematize:
      details: |
        Define a map of partials for Platen to inject as needed. These partials are only
        injected when [sref:`Enabled`] is set to `true`.

        <!-- Reference Links -->
        [sref:`Enabled`]: Platen.Site.Features.Details.Enabled
      weight: 100
      skipSchemaRender: true
    type: object
    properties:
      Renderers:
        title: Renderer Partials
        description: Registers one or more partials that act as render hooks.
        type: object
        schematize:
          skipSchemaRender: true
          details: |
            Defines a map of partials to use as Markdown render hooks. Like all partials, these are
            only processed when [sref:`Enabled`] is set to `true`.

            Supported renderer partials include:

            - `Codeblock`, processed for fenced code blocks with a language ID
            - `Heading`, processed for headings
            - `Image`, processed for image links
            - `Link`, processed for non-image links

            In all cases, all renderer partials for enabled features are checked one after the other
            unless they return a render string. Only the first applicable partial that returns a
            render string is processed and rendered.

            <!-- Reference Links -->
            [sref:`Enabled`]: Platen.Site.Features.Details.Enabled
        properties:
          Codeblock:
            title: Codeblock Render Hook Partial
            description: Adds a partial to call when processing the codeblock render hook.
            schematize:
              details: |
                Adds support for rendering content as collapsible blocks with a summary. This render
                hook is only processed when the language ID for a codeblock is `details`.

                It renders the codeblock's definition inside a [sref:<`details`>][s01] element with
                a [sref:`<summary>`][s02] and the content rendered in a [sref:`<div`][s03].

                For more information about using the codeblock, see
                [the reference documentation][01].

                This value defaults to `platen/features/details/codeblock`. You can replace it with a
                different value, defining a new partial, or override the existing partial by creating
                the file `layouts/partials/platen/features/mermaid/codeblock.html` in your own site or
                module.

                For more information about defining codeblock render hook partials, see
                [Defining a Codeblock Render Hook Partial][02] in the [Theme Guide][03].

                <!-- Reference Links -->
                [01]: /modules/platen/renderers/details
                [02]: /styling
                [03]: /styling
                [s01]: mdn.html.element:details
                [s02]: mdn.html.element:summary
                [s03]: mdn.html.element:div
            type: string
            default: platen/features/details/codeblock
