{{/*
  This partial returns the nav list for a member of a webring. It expects to
  receive an instance of scratch with the params already set; the only logic
  this performs is to arrange and format the information. All retrieval must
  be done first.
*/}}
{{- $params            := .                         -}}

{{/* Calculated properties */}}
{{- $idMap   := partial "toroidal/utils/getNavIDs"           $params                -}}
{{- $jsNames := partial "toroidal/utils/scripting/getNames"  $params                -}}
{{- $js      := partial "toroidal/utils/scripting/render.js" $params | htmlUnescape -}}
{{- $js       = split   $js "\n"                                                    -}}
{{- $js       = delimit $js "\n    "                                                -}}

{{- if $params.ForEmbedding }}
  {{- partial "platen/features/toroidal/menu/embed-header" $params.WebringName }}
{{- else }}
  {{- partial "platen/features/toroidal/menu/list-item" $params }}
{{- end }}
  <ul>
    <li>
      <a target="_blank"
          id="{{ $idMap.Prev }}"
          href="{{ $params.PrevHref }}">Previous</a>
    </li>
    <li>
      <a target="_blank"
          id="{{ $idMap.List }}"
          href="{{ $params.MemberListHref }}">Member List</a>
    </li>
    {{- if $params.RandomMemberLink }}
    <li>
      <a target="_blank"
          onclick="{{ $jsNames.GoToFunction | safeJS }}"
          role="button">Random</a>
    </li>
    {{- end }}
    <li>
      <a target="_blank"
          id="{{ $idMap.Next }}"
          href="{{ $params.NextHref }}">Next</a>
    </li>
  </ul>
  <script type="text/javascript">
    {{ $js | safeJS }}
  </script>
</li>
