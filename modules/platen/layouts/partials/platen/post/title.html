{{/*
  Docs.Partial: title
*/}}
{{- $Context := . -}}

{{/* Determine whether the page already has an h1 */}}
{{- $hasHeading := partial "platen/param/resolve" (
  dict "Config"  "platen.display.header.title_as_heading"
       "Param"   "platen.title_as_heading"
       "Context" $Context
       "Default" false
) -}}

{{/* Continue only if the post doesn't already have a title heading */}}
{{- if not $hasHeading -}}
  {{- $titleParams := dict "Context" $Context "ForHeading" true    -}}
  {{- $titleText   := partial "platen/utils/getTitle" $titleParams -}}
  {{- $href        := $Context.RelPermalink                        -}}

  {{/* Define the attribute list for the link */}}
  {{- $attributes := slice                                                -}}
  {{- $attributes  = $attributes | append (printf `href="%s"` $href)      -}}
  {{- $attributes  = partial "platen/utils/getSafeAttributes" $attributes -}}

  {{/* Render the heading */}}
  <h1><a {{ $attributes }}>{{ $titleText }}</a></h1>
{{- end -}}