{{/*
  Docs.Partial: title
*/}}
{{- $context := . -}}

{{/* Determine whether the page already has an h1 */}}
{{- $hasHeading := default site.Params.platen.display.header.title_as_heading
                           $context.Params.platen.title_as_heading
-}}
{{- $hasHeading  = default false $hasHeading -}}

{{/* Continue only if the post doesn't already have a title heading */}}
{{- if not $hasHeading -}}
  {{- $titleParams := dict "Context" $context "ForHeading" true    -}}
  {{- $titleText   := partial "platen/utils/getTitle" $titleParams -}}
  {{- $href        := $context.RelPermalink                        -}}

  {{/* Define the attribute list for the link */}}
  {{- $attributes := slice                                                -}}
  {{- $attributes  = $attributes | append (printf `href="%s"` $href)      -}}
  {{- $attributes  = partial "platen/utils/getSafeAttributes" $attributes -}}

  {{/* Render the heading */}}
  <h1><a {{ $attributes }}>{{ $titleText }}</a></h1>
{{- end -}}