{{/*
    Docs.Partial: title
*/}}
{{- $context := . -}}

{{/* Get the title text */}}
{{- $titleParams := dict "Context" $context "ForHeader" true     -}}
{{- $titleText   := partial "platen/utils/getTitle" $titleParams -}}

{{/* Determine the element type. */}}
{{- $shouldBeHeader := default site.Params.Platen.Display.Header.TitleAsHeading
                               $context.Params.Platen.TitleAsHeading
-}}
{{- $shouldBeHeader  = default false $shouldBeHeader -}}

{{- $elementType       := cond $shouldBeHeader "h1" "strong" -}}
{{- $openTagAttributes := slice                              -}}
{{- if $shouldBeHeader -}}
  {{- $id               := urlize (lower $titleText)                          -}}
  {{- $openTagAttributes = $openTagAttributes | append (printf `id="%s"` $id) -}}
{{- end -}}
{{- $openTagAttributes = partial "platen/utils/getSafeAttributes" $openTagAttributes -}}
{{- $openTag          := printf `<%s %s>` $elementType $openTagAttributes | safeHTML -}}
{{- $closeTag         := printf `</%s>`   $elementType                    | safeHTML -}}

{{/* Render */}}
{{ $openTag }}
  {{- $titleText -}}
{{ $closeTag }}
