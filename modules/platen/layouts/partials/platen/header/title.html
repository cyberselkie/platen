{{/*
    Docs.Partial: title
*/}}

{{/* Get the title text */}}
{{- $TitleParams := dict "Context" page "ForHeader" true         -}}
{{- $TitleText   := partial "platen/utils/getTitle" $TitleParams -}}

{{/* Determine the element tag. */}}
{{- $ShouldBeHeader := partial "platen/param/resolve" (
      dict "Config"  "platen.display.header.title_as_heading"
           "Param"   "platen.title_as_heading"
           "Context" page
           "Default" false
    )
-}}
{{- $ElementTag := cond $ShouldBeHeader "h1" "strong" -}}

{{/* define the attributes for the tag */}}
{{- $openTagAttributes := slice -}}
{{- if $ShouldBeHeader -}}
  {{- $ID               := urlize (lower $TitleText)                          -}}
  {{- $openTagAttributes = $openTagAttributes | append (printf `id="%s"` $ID) -}}
{{- end -}}
{{- $openTagAttributes = partial "platen/utils/getSafeAttributes" $openTagAttributes -}}
{{- $openTag          := printf `<%s %s>` $ElementTag $openTagAttributes | safeHTML  -}}
{{- $closeTag         := printf `</%s>`   $ElementTag                    | safeHTML  -}}

{{/* Render */}}
{{ $openTag }}
  {{- $TitleText -}}
{{ $closeTag }}
